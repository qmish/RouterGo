interfaces:
  - name: eth0
    ip: 192.168.1.1/24

routes:
  - destination: 0.0.0.0/0
    gateway: 192.168.1.254
    interface: eth0
    metric: 100

firewall:
  - chain: INPUT
    action: ACCEPT
    protocol: TCP
    dst_port: 22

firewall_defaults:
  input: DROP
  output: ACCEPT
  forward: DROP

nat:
  - type: SNAT
    src_ip: 192.168.1.0/24
    to_ip: 203.0.113.10

qos:
  - name: realtime
    protocol: UDP
    dst_port: 5060
    rate_limit_kbps: 512
    priority: 10
    max_queue: 100
    drop_policy: tail

ids:
  enabled: true
  window_seconds: 10
  rate_threshold: 200
  portscan_threshold: 20
  unique_dst_threshold: 10
  behavior_action: ALERT
  alert_limit: 1000
  whitelist_src:
    - 192.168.0.0/16
  whitelist_dst:
    - 127.0.0.0/8

selfheal:
  enabled: true
  ping_gateway: 192.168.1.254
  http_check_url: http://192.168.1.1/health
  timeout_seconds: 3

dashboard:
  enabled: true
  static_dir: web

p2p:
  enabled: false
  peer_id: node-1
  discovery: true
  listen_addr: :5355
  multicast_addr: 224.0.0.251:5355
  sync_interval: 10
  peer_ttl_seconds: 30
  private_key_file: p2p_private.key
  public_key_file: p2p_public.key

proxy:
  enabled: false
  listen_addr: :8081
  h3_addr: :8443
  upstream: http://example.com
  cache_size: 100
  cache_ttl_seconds: 60
  enable_gzip: true
  enable_brotli: false
  enable_h3: false
  hsts: false
  cert_file: ""
  key_file: ""

integrations:
  timeout_seconds: 3
  geoip:
    enabled: false
    mmdb_path: GeoLite2-City.mmdb
    http_url: ""
    http_token: ""
  asn:
    enabled: false
    token: ""
  threat_intel:
    enabled: false
    api_key: ""
  logs:
    enabled: false
    loki_url: ""
    elastic_url: ""
  metrics:
    enabled: false
    remote_write_url: ""
    interval_seconds: 10

security:
  enabled: false
  require_auth: true
  allowed_cidrs:
    - 10.0.0.0/8
  tokens:
    - role: admin
      value: env:ROUTERGO_ADMIN_TOKEN
    - role: read
      value: env:ROUTERGO_READ_TOKEN
  tls:
    enabled: false
    cert_file: ""
    key_file: ""
    client_ca_file: ""
    require_client_cert: false

ha:
  enabled: false
  node_id: node-1
  priority: 100
  heartbeat_interval_seconds: 2
  hold_seconds: 6
  bind_addr: :5356
  multicast_addr: 224.0.0.252:5356
  peers:
    - http://127.0.0.1:8080
  state_sync_interval_seconds: 5
  state_endpoint_path: /api/ha/state
  tls:
    enabled: false
    cert_file: ""
    key_file: ""
    client_ca_file: ""

api:
  address: :8080

metrics:
  address: :9090
  path: /metrics

performance:
  egress_batch_size: 16
  egress_idle_sleep_millis: 2

observability:
  enabled: true
  traces_limit: 1000
  pprof_enabled: false
  pprof_path: /debug/pprof
  alerts_enabled: true
  alerts_limit: 1000
  alert_interval_seconds: 10
  drops_threshold: 100
  errors_threshold: 10
  ids_alerts_threshold: 5

logging:
  level: info

presets:
  dir: presets
